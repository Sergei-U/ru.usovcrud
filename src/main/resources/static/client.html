<!DOCTYPE html>
<html lang="en" xmlns:form="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <a href="index.html">home</a></div>
    <a href="clientlist.html">client list</a></div>
    <script>
        console.log('ho');

        window.addEventListener("load", function() {
            let clientForm = document.forms["clientForm"];
            let firstName = clientForm.elements["firstName"].value;
            let lastName = clientForm.elements["lastName"].value;
            let thirdName = clientForm.elements["thirdName"].value;
            let telephoneNumber = clientForm.elements["telephoneNumber"].value;
            let email = clientForm.elements["email"].value;
            let serialPassport = clientForm.elements["serialPassport"].value;
            let numberPassport = clientForm.elements["numberPassport"].value;
            document.getElementById('myForm').addEventListener("submit", function(e) {
                e.preventDefault(); // before the code
                /* do what you want with the form */

                // Should be triggered on form submit
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "./client/add", true);
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.send(JSON.stringify({
                    firstName: firstName,
                    lastName: lastName,
                    thirdName: thirdName,
                    telephoneNumber: telephoneNumber,
                    email: email,
                    serialPassport: serialPassport,
                    numberPassport: numberPassport,
                }));
            })
        });
    </script>
    <title>Страница клиента</title>
</head>
<body>

<form:form name="clientForm" id="clientForm" method="post">
    <input type="name" name="firstName" placeholder="firstName" required>
    <input type="name" name="lastName" placeholder="lastName" required>
    <input type="name" name="thirdName" placeholder="thirdName" required>
    <input type="tel" name="telephoneNumber" placeholder="telephoneNumber" required>
    <input type="email" name="email" placeholder="email" required>
    <input type="number" name="serialPassport" placeholder="serialPassport" required>
    <input type="number" name="numberPassport" placeholder="numberPassport" required>
    <button type="submit" onsubmit="sendForm(this)" value="Add client">add client</button>
    <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
</form:form>

</div>
</body>
</html>